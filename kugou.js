/*
ÈÖ∑ÁãóÊ¶ÇÂøµÁâàÊØèÊó•Ëá™Âä®È¢ÜÂèñVIP-Eric‰∏ìÂ±û
*/
var _0xodE='jsjiami.cn.v7';function _0x1416(_0x16e5f9,_0x17d077){const _0x57fe08=_0x4bcb();return _0x1416=function(_0x25b046,_0x198536){_0x25b046=_0x25b046-0x72;let _0x4bcbdc=_0x57fe08[_0x25b046];if(_0x1416['wtcSDo']===undefined){var _0x14161a=function(_0x20eb96){const _0x4317c6='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x165670='',_0x327c74='',_0x457282=_0x165670+_0x14161a;for(let _0x4bb630=0x0,_0x4ba0cd,_0x28bfd9,_0x1f9bdc=0x0;_0x28bfd9=_0x20eb96['charAt'](_0x1f9bdc++);~_0x28bfd9&&(_0x4ba0cd=_0x4bb630%0x4?_0x4ba0cd*0x40+_0x28bfd9:_0x28bfd9,_0x4bb630++%0x4)?_0x165670+=_0x457282['charCodeAt'](_0x1f9bdc+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x4ba0cd>>(-0x2*_0x4bb630&0x6)):_0x4bb630:0x0){_0x28bfd9=_0x4317c6['indexOf'](_0x28bfd9);}for(let _0x1ffab2=0x0,_0x49bceb=_0x165670['length'];_0x1ffab2<_0x49bceb;_0x1ffab2++){_0x327c74+='%'+('00'+_0x165670['charCodeAt'](_0x1ffab2)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x327c74);};const _0x3df9e0=function(_0x308688,_0x3ec7ca){let _0x134653=[],_0x55d04e=0x0,_0x53a96e,_0x4ddd35='';_0x308688=_0x14161a(_0x308688);let _0x4e5284;for(_0x4e5284=0x0;_0x4e5284<0x100;_0x4e5284++){_0x134653[_0x4e5284]=_0x4e5284;}for(_0x4e5284=0x0;_0x4e5284<0x100;_0x4e5284++){_0x55d04e=(_0x55d04e+_0x134653[_0x4e5284]+_0x3ec7ca['charCodeAt'](_0x4e5284%_0x3ec7ca['length']))%0x100,_0x53a96e=_0x134653[_0x4e5284],_0x134653[_0x4e5284]=_0x134653[_0x55d04e],_0x134653[_0x55d04e]=_0x53a96e;}_0x4e5284=0x0,_0x55d04e=0x0;for(let _0x2a256b=0x0;_0x2a256b<_0x308688['length'];_0x2a256b++){_0x4e5284=(_0x4e5284+0x1)%0x100,_0x55d04e=(_0x55d04e+_0x134653[_0x4e5284])%0x100,_0x53a96e=_0x134653[_0x4e5284],_0x134653[_0x4e5284]=_0x134653[_0x55d04e],_0x134653[_0x55d04e]=_0x53a96e,_0x4ddd35+=String['fromCharCode'](_0x308688['charCodeAt'](_0x2a256b)^_0x134653[(_0x134653[_0x4e5284]+_0x134653[_0x55d04e])%0x100]);}return _0x4ddd35;};_0x1416['duEKnL']=_0x3df9e0,_0x16e5f9=arguments,_0x1416['wtcSDo']=!![];}const _0x3bc461=_0x57fe08[0x0],_0x40b148=_0x25b046+_0x3bc461,_0x1ab585=_0x16e5f9[_0x40b148];if(!_0x1ab585){if(_0x1416['OEschC']===undefined){const _0x2ec45f=function(_0x38a7ae){this['dGAXVU']=_0x38a7ae,this['njjSsB']=[0x1,0x0,0x0],this['dumRLr']=function(){return'newState';},this['LnnFXy']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['wpCNas']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x2ec45f['prototype']['QUJwpv']=function(){const _0x47c274=new RegExp(this['LnnFXy']+this['wpCNas']),_0x27813e=_0x47c274['test'](this['dumRLr']['toString']())?--this['njjSsB'][0x1]:--this['njjSsB'][0x0];return this['qTchFA'](_0x27813e);},_0x2ec45f['prototype']['qTchFA']=function(_0x230503){if(!Boolean(~_0x230503))return _0x230503;return this['DcEbST'](this['dGAXVU']);},_0x2ec45f['prototype']['DcEbST']=function(_0x4481c6){for(let _0x5db53e=0x0,_0x4ab519=this['njjSsB']['length'];_0x5db53e<_0x4ab519;_0x5db53e++){this['njjSsB']['push'](Math['round'](Math['random']())),_0x4ab519=this['njjSsB']['length'];}return _0x4481c6(this['njjSsB'][0x0]);},new _0x2ec45f(_0x1416)['QUJwpv'](),_0x1416['OEschC']=!![];}_0x4bcbdc=_0x1416['duEKnL'](_0x4bcbdc,_0x198536),_0x16e5f9[_0x40b148]=_0x4bcbdc;}else _0x4bcbdc=_0x1ab585;return _0x4bcbdc;},_0x1416(_0x16e5f9,_0x17d077);}function _0x4bcb(){const _0xb960cb=(function(){return[...[_0xodE,'MXjsPjJliSaDMpmESilC.WGcHnHQ.Jvl7HhgfVP==','W7yECGLg','pftdISo3BSkab04iW47dGCk2W48W','aeP3gSoaWQJdKqZcKSodWO4','WQmaEa','W41GBWpcPvj8WQq','5lYz5AY955QiW4tcO8kKW6tdN8kGW4H8A3ydbSoOW7K','WRHdWQJdRwBdJmkkW6TrW7ZcVGW','WRZdImki','W4LWkCkdW7nukwvwW4nDW4vW','W58Mra','WQ3dLCkkwG','5Psz5OYT5BAr5lY+5A2x5yMI5O6r5lMA5y615A6P5ykQAthcRt7dOUs6TUAaP+AoM+s/GG','FspdRSonuavFWOVdVCoS','hCkEl8ojca','nehcShS','a1qRWQzor2fkqa','WQVdVrldLbe','5lYe5A6e55U4WRzMs8k8ad9DDdBcSHW0iCoNWOq','ArddRs5CW6ddL8kOWRRdO8o8WQ0q','WO7cImkhjmkLWRFcG8oZgG','dmkLuComd3tcSCo/WQS','f0uT','W7hcOmoT','u8oPW6S','jmo0W6xcO1LBW4S','WQldLH4','bsWe','pmoNWRRcRfzxW4FdLZa','dIyx','uCoHWRpdQSojWRxcLmkIjwW','nN3cQmoBW7i','ymoNW7VdMCkXmL4UWP/cMhJdKW','WR06ga','jvtcVg0fWRu','W4ldKmoSpCkBWQJcP8oX','WPX2WQBdS8kd','WRRdJSkwvMbBvLpdKq','f8kjCSoscG','6yAN54UX5Qwl5B2854Ml6iwu5yMY6Acm5y+1W4VcMI/cJIVdPaFdTG','j8o2WQNcOv1cW50','g0JcReBdOG','AW/cKSk1pmozrvuiW6ldRSk4W7C3','e8kIlsSs','WQldNCojtwTF','cCkanSkngtqrW7rqoCkjWRxcLa','lf7dKmovASkcbGyIW4tdNCkAW54H','b8k5WQHPWRhcR8kHW6T1WQa','WQRdLSknwMbis1ZdHuC','WQKmAa'],...(function(){return['WQCjzCkbWOlcOSo7W53cUW','W4P7tH7cUvX7WQv1','W5euyq','W6VdPe7dHePNWPqGpG','6i+C5y2w5PA25O+W5OQX5yMf','h1iWWQHjtMLaBbXe','5Pws5O6w5BwT5O+c5lUw5y2e5lY55A2b','W7xcMSoefYO','W5awWOBdRSkt','W67cQSoRfq8F','W4xdJCoCkmkzWRhcOmoY','hSoZWQpdRmkmWRVcGCkUp2e','W4afESouWQyuEa','W7DKrM/cOa','BalcNCk2pSoyqXecW5ldHmkLW6W','WO81EmoeWQu','heVcNCo0W602','W7NcNL/dJZHcjZ3dVSk7WRv2','WOiXk8oKW550WOGFW4RcHSo5W4y','W54UWPu','W4X9lW','W71uWRVdII3cJwJdJghcS1/cPmkE','rmozz8onide+W6nP','W7BcILpcTwxcJL0cmmkJW4KgWQa','oSoIW4CvaNlcK2Xe','WQtdKaNdPsddJeaCn8k0W4uhWPBdMmos','f8kjCSoubcyhW64','e8okWQNdTCkGySosuCoLdxhcG0K','amk4WQLNW6pdI8oHWRDVWPVdI8oQW7hdSq','W5DbrcpcLG','WRXPgrVdKqb4aa','5l6t5A2o55MDW5vGbgxdGCoBW79RydtdPmoo','fLbWdq','i0lcUg0pWRK','r8oLW7G/WRxcImkIW7nM','FYhdOCogbMqzWORdMmoXv2WW','WOG6vrJcJMfcWOu','WRe4qCkBW4C','zColWQilWOdcGMLUWR9zWOygWRmCW5i','WRBdHXJdQt7dNWqwlW','dmoLWRi','WRldGqpdTdu','W4PQsd7cO15/','m1tdGW','D8orWQpcOv5cW48','efv1amoa','tCoCACkwx3DcW456k8kwWOlcHq','W40Xxa','W7dcOmoTW7atW7G4imoX','W7hdTftcUauhW7znCqz/qG'];}())];}());_0x4bcb=function(){return _0xb960cb;};return _0x4bcb();};const _0x351848=_0x1416;if(function(_0x400b54,_0x107850,_0x457fff,_0x9cf6a6,_0x5090dc,_0x3d9516,_0x108b1c){return _0x400b54=_0x400b54>>0x3,_0x3d9516='hs',_0x108b1c='hs',function(_0xc37931,_0x232b34,_0x301878,_0x53d479,_0x77639c){const _0x11c961=_0x1416;_0x53d479='tfi',_0x3d9516=_0x53d479+_0x3d9516,_0x77639c='up',_0x108b1c+=_0x77639c,_0x3d9516=_0x301878(_0x3d9516),_0x108b1c=_0x301878(_0x108b1c),_0x301878=0x0;const _0x480795=_0xc37931();while(!![]&&--_0x9cf6a6+_0x232b34){try{_0x53d479=-parseInt(_0x11c961(0xa4,'LEwN'))/0x1*(parseInt(_0x11c961(0xcc,'oyay'))/0x2)+-parseInt(_0x11c961(0xbc,'LEwN'))/0x3+-parseInt(_0x11c961(0xb1,'oyay'))/0x4*(parseInt(_0x11c961(0xb2,'IkM6'))/0x5)+-parseInt(_0x11c961(0xd4,'1Y9t'))/0x6*(-parseInt(_0x11c961(0x7c,'TC%G'))/0x7)+-parseInt(_0x11c961(0x9a,'lm9M'))/0x8*(parseInt(_0x11c961(0xa3,'A5NY'))/0x9)+-parseInt(_0x11c961(0xa5,'@W8['))/0xa+parseInt(_0x11c961(0xaa,'Uels'))/0xb;}catch(_0x5d19ee){_0x53d479=_0x301878;}finally{_0x77639c=_0x480795[_0x3d9516]();if(_0x400b54<=_0x9cf6a6)_0x301878?_0x5090dc?_0x53d479=_0x77639c:_0x5090dc=_0x77639c:_0x301878=_0x77639c;else{if(_0x301878==_0x5090dc['replace'](/[fCMJVhSEDgQHPlGWpX=]/g,'')){if(_0x53d479===_0x232b34){_0x480795['un'+_0x3d9516](_0x77639c);break;}_0x480795[_0x108b1c](_0x77639c);}}}}}(_0x457fff,_0x107850,function(_0x3535d9,_0x4329bc,_0x1f2b0f,_0x4141fc,_0x40045e,_0xa73ecd,_0x16d876){return _0x4329bc='\x73\x70\x6c\x69\x74',_0x3535d9=arguments[0x0],_0x3535d9=_0x3535d9[_0x4329bc](''),_0x1f2b0f=`\x72\x65\x76\x65\x72\x73\x65`,_0x3535d9=_0x3535d9[_0x1f2b0f]('\x76'),_0x4141fc=`\x6a\x6f\x69\x6e`,(0x17ec80,_0x3535d9[_0x4141fc](''));});}(0x5e0,0xc2244,_0x4bcb,0xbe),_0x4bcb){}const _0x96dc34=new Env(_0x351848(0x83,'&#yo'));if($request[_0x351848(0xc7,'fUm9')]){let _0x3c5a0a=$request[_0x351848(0xbd,'hytz')],_0x4d0e42=$request[_0x351848(0x84,'p31*')],_0x3909ed=new URLSearchParams(_0x3c5a0a[_0x351848(0xbb,'dUaj')]('?')[0x1]),_0x379e64={'appid':_0x3909ed[_0x351848(0x74,'Uels')](_0x351848(0xcd,'LEwN')),'clientver':_0x3909ed[_0x351848(0x7d,'9Anm')](_0x351848(0x8e,'Mtd$')),'clienttime':_0x3909ed[_0x351848(0x72,'F9i7')](_0x351848(0x8c,'fUm9')),'mid':_0x3909ed[_0x351848(0xc9,'hytz')](_0x351848(0x8d,'Mtd$')),'uuid':_0x3909ed[_0x351848(0xc3,'Mtd$')](_0x351848(0xae,'dUaj')),'dfid':_0x3909ed[_0x351848(0xa2,'Fp9(')](_0x351848(0xce,'u]ga')),'token':_0x3909ed[_0x351848(0x76,'@W8[')](_0x351848(0x96,'(]oz')),'userid':_0x3909ed[_0x351848(0x79,'kdKZ')](_0x351848(0x7e,'u]ga')),'srcappid':_0x3909ed[_0x351848(0xb6,'K0Ja')](_0x351848(0x98,'k9u4')),'signature':_0x3909ed[_0x351848(0x74,'Uels')](_0x351848(0xb0,'Uels'))},_0x4126df={':authority':_0x4d0e42[_0x351848(0x7a,'K0Ja')],'content-type':_0x4d0e42[_0x351848(0x9f,'t%HF')],'kg-rf':_0x4d0e42[_0x351848(0x82,'LEwN')],'accept':_0x4d0e42[_0x351848(0x9e,'jexd')],'kg-thash':_0x4d0e42[_0x351848(0xa8,'LEwN')],'accept-language':_0x4d0e42[_0x351848(0xa7,'@W8[')],'accept-encoding':_0x4d0e42[_0x351848(0xb4,'u9OI')],'kg-rec':_0x4d0e42[_0x351848(0x88,'fUm9')],'user-agent':_0x4d0e42[_0x351848(0x99,'K0Ja')],'kg-rc':_0x4d0e42[_0x351848(0xb3,'9Anm')],'kg-fake':_0x4d0e42[_0x351848(0x75,'p31*')],'content-length':_0x4d0e42[_0x351848(0xc1,'C6Hg')],'uni-useragent':_0x4d0e42[_0x351848(0x89,'LEwN')]};function _0x466f99(_0x2e4928,_0xb4cd8f){const _0x59d39f=_0x351848,_0x1093a3={'nNxTA':_0x59d39f(0xbf,'uQ8%'),'tlSDD':function(_0x44459c,_0x28495a,_0x357d8d){return _0x44459c(_0x28495a,_0x357d8d);},'hUNpF':function(_0x16e1ae){return _0x16e1ae();},'JytMg':function(_0x2747d4,_0x28f793){return _0x2747d4!==_0x28f793;},'KUVJo':_0x59d39f(0x9b,'BihK')},_0x446eb8=(function(){let _0x230b21=!![];return function(_0x10b2b6,_0x25aa58){const _0xb8c9c4=_0x230b21?function(){const _0x5cc7f8=_0x1416;if(_0x25aa58){const _0x5c1265=_0x25aa58[_0x5cc7f8(0x87,'rn7]')](_0x10b2b6,arguments);return _0x25aa58=null,_0x5c1265;}}:function(){};return _0x230b21=![],_0xb8c9c4;};}()),_0x1aad65=_0x1093a3[_0x59d39f(0x80,'Y@28')](_0x446eb8,this,function(){const _0x207ba8=_0x59d39f;return _0x1aad65[_0x207ba8(0x7f,'k9u4')]()[_0x207ba8(0x97,'vL(7')](_0x1093a3[_0x207ba8(0xd0,'@W8[')])[_0x207ba8(0xc4,'IkM6')]()[_0x207ba8(0xc2,'dUaj')](_0x1aad65)[_0x207ba8(0xaf,'u]ga')](_0x1093a3[_0x207ba8(0xab,'IkM6')]);});_0x1093a3[_0x59d39f(0x95,'vL(7')](_0x1aad65);if($persistentStore)_0x1093a3[_0x59d39f(0xc0,'wGbW')](_0x1093a3[_0x59d39f(0x7b,'jexd')],_0x1093a3[_0x59d39f(0x85,'xCHz')])?_0x2f3098[_0x59d39f(0xb7,'@W8[')](_0x495d30[_0x59d39f(0xb5,'@W8[')](_0x8894cb),_0x241e47):$persistentStore[_0x59d39f(0x9d,'lm9M')](JSON[_0x59d39f(0x8f,'IkM6')](_0xb4cd8f),_0x2e4928);else{if($prefs)$prefs[_0x59d39f(0x8a,'C6Hg')](JSON[_0x59d39f(0xa6,'rTvr')](_0xb4cd8f),_0x2e4928);else $persistent&&$persistent[_0x59d39f(0xb8,'IkM6')](_0x2e4928,JSON[_0x59d39f(0xcf,'F9i7')](_0xb4cd8f));}}_0x466f99(_0x351848(0xbe,')!9J'),_0x379e64),_0x466f99(_0x351848(0xc6,'&#yo'),_0x4126df),_0x466f99(_0x351848(0x93,'F9i7'),_0x3c5a0a),_0x96dc34[_0x351848(0xb9,'C6Hg')](_0x351848(0xad,'oyay'),JSON[_0x351848(0x78,'p31*')](_0x379e64)),_0x96dc34[_0x351848(0x73,'vL(7')](_0x351848(0xd1,'uQ8%'),JSON[_0x351848(0x81,'fUm9')](_0x4126df)),_0x96dc34[_0x351848(0xa1,'Dcf1')](_0x351848(0xc5,'Mtd$'),_0x3c5a0a),_0x96dc34[_0x351848(0x77,'kdKZ')](_0x351848(0xcb,'kdKZ')),_0x96dc34[_0x351848(0x90,'wGbW')](_0x351848(0x92,'K0Ja'),_0x351848(0x94,'69%A'),''),_0x96dc34[_0x351848(0xca,'fUm9')]();}
function Env(t,e){class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;return"POST"===e&&(s=this.post),new Promise((e,a)=>{s.call(this,t,(t,s,r)=>{t?a(t):e(s)})})}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.encoding="utf-8",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`üîî${this.name}, ÂºÄÂßã!`)}getEnv(){return"undefined"!=typeof $environment&&$environment["surge-version"]?"Surge":"undefined"!=typeof $environment&&$environment["stash-version"]?"Stash":"undefined"!=typeof module&&module.exports?"Node.js":"undefined"!=typeof $task?"Quantumult X":"undefined"!=typeof $loon?"Loon":"undefined"!=typeof $rocket?"Shadowrocket":void 0}isNode(){return"Node.js"===this.getEnv()}isQuanX(){return"Quantumult X"===this.getEnv()}isSurge(){return"Surge"===this.getEnv()}isLoon(){return"Loon"===this.getEnv()}isShadowrocket(){return"Shadowrocket"===this.getEnv()}isStash(){return"Stash"===this.getEnv()}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null){try{return JSON.stringify(t)}catch{return e}}getjson(t,e){let s=e;const a=this.getdata(t);if(a)try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise(e=>{this.get({url:t},(t,s,a)=>e(a))})}runScript(t,e){return new Promise(s=>{let a=this.getdata("@chavy_boxjs_userCfgs.httpapi");a=a?a.replace(/\n/g,"").trim():a;let r=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");r=r?1*r:20,r=e&&e.timeout?e.timeout:r;const[i,o]=a.split("@"),n={url:`http://${o}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:r},headers:{"X-Key":i,Accept:"*/*"},timeout:r};this.post(n,(t,e,a)=>s(a))}).catch(t=>this.logErr(t))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),a=!s&&this.fs.existsSync(e);if(!s&&!a)return{};{const a=s?t:e;try{return JSON.parse(this.fs.readFileSync(a))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),a=!s&&this.fs.existsSync(e),r=JSON.stringify(this.data);s?this.fs.writeFileSync(t,r):a?this.fs.writeFileSync(e,r):this.fs.writeFileSync(t,r)}}lodash_get(t,e,s){const a=e.replace(/\[(\d+)\]/g,".$1").split(".");let r=t;for(const t of a)if(r=Object(r)[t],void 0===r)return s;return r}lodash_set(t,e,s){return Object(t)!==t?t:(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce((t,s,a)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[a+1])>>0==+e[a+1]?[]:{},t)[e[e.length-1]]=s,t)}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,a]=/^@(.*?)\.(.*?)$/.exec(t),r=s?this.getval(s):"";if(r)try{const t=JSON.parse(r);e=t?this.lodash_get(t,a,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,a,r]=/^@(.*?)\.(.*?)$/.exec(e),i=this.getval(a),o=a?"null"===i?null:i||"{}":"{}";try{const e=JSON.parse(o);this.lodash_set(e,r,t),s=this.setval(JSON.stringify(e),a)}catch(e){const i={};this.lodash_set(i,r,t),s=this.setval(JSON.stringify(i),a)}}else s=this.setval(t,e);return s}getval(t){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":return $persistentStore.read(t);case"Quantumult X":return $prefs.valueForKey(t);case"Node.js":return this.data=this.loaddata(),this.data[t];default:return this.data&&this.data[t]||null}}setval(t,e){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":return $persistentStore.write(t,e);case"Quantumult X":return $prefs.setValueForKey(t,e);case"Node.js":return this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0;default:return this.data&&this.data[e]||null}}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar))}get(t,e=(()=>{})){switch(t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"],delete t.headers["content-type"],delete t.headers["content-length"]),t.params&&(t.url+="?"+this.queryStr(t.params)),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,(t,s,a)=>{!t&&s&&(s.body=a,s.statusCode=s.status?s.status:s.statusCode,s.status=s.statusCode),e(t,s,a)});break;case"Quantumult X":this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:a,headers:r,body:i,bodyBytes:o}=t;e(null,{status:s,statusCode:a,headers:r,body:i,bodyBytes:o},i,o)},t=>e(t&&t.error||"UndefinedError"));break;case"Node.js":let s=require("iconv-lite");this.initGotEnv(t),this.got(t).on("redirect",(t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}}).then(t=>{const{statusCode:a,statusCode:r,headers:i,rawBody:o}=t,n=s.decode(o,this.encoding);e(null,{status:a,statusCode:r,headers:i,rawBody:o,body:n},n)},t=>{const{message:a,response:r}=t;e(a,r,r&&s.decode(r.rawBody,this.encoding))})}}post(t,e=(()=>{})){const s=t.method?t.method.toLocaleLowerCase():"post";switch(t.body&&t.headers&&!t.headers["Content-Type"]&&!t.headers["content-type"]&&(t.headers["content-type"]="application/x-www-form-urlencoded"),t.headers&&(delete t.headers["Content-Length"],delete t.headers["content-length"]),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient[s](t,(t,s,a)=>{!t&&s&&(s.body=a,s.statusCode=s.status?s.status:s.statusCode,s.status=s.statusCode),e(t,s,a)});break;case"Quantumult X":t.method=s,this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then(t=>{const{statusCode:s,statusCode:a,headers:r,body:i,bodyBytes:o}=t;e(null,{status:s,statusCode:a,headers:r,body:i,bodyBytes:o},i,o)},t=>e(t&&t.error||"UndefinedError"));break;case"Node.js":let a=require("iconv-lite");this.initGotEnv(t);const{url:r,...i}=t;this.got[s](r,i).then(t=>{const{statusCode:s,statusCode:r,headers:i,rawBody:o}=t,n=a.decode(o,this.encoding);e(null,{status:s,statusCode:r,headers:i,rawBody:o,body:n},n)},t=>{const{message:s,response:r}=t;e(s,r,r&&a.decode(r.rawBody,this.encoding))})}}time(t,e=null){const s=e?new Date(e):new Date;let a={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in a)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[e]:("00"+a[e]).substr((""+a[e]).length)));return t}queryStr(t){let e="";for(const s in t){let a=t[s];null!=a&&""!==a&&("object"==typeof a&&(a=JSON.stringify(a)),e+=`${s}=${a}&`)}return e=e.substring(0,e.length-1),e}msg(e=t,s="",a="",r){const i=t=>{switch(typeof t){case void 0:return t;case"string":switch(this.getEnv()){case"Surge":case"Stash":default:return{url:t};case"Loon":case"Shadowrocket":return t;case"Quantumult X":return{"open-url":t};case"Node.js":return}case"object":switch(this.getEnv()){case"Surge":case"Stash":case"Shadowrocket":default:{let e=t.url||t.openUrl||t["open-url"];return{url:e}}case"Loon":{let e=t.openUrl||t.url||t["open-url"],s=t.mediaUrl||t["media-url"];return{openUrl:e,mediaUrl:s}}case"Quantumult X":{let e=t["open-url"]||t.url||t.openUrl,s=t["media-url"]||t.mediaUrl,a=t["update-pasteboard"]||t.updatePasteboard;return{"open-url":e,"media-url":s,"update-pasteboard":a}}case"Node.js":return}default:return}};if(!this.isMute)switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:$notification.post(e,s,a,i(r));break;case"Quantumult X":$notify(e,s,a,i(r));break;case"Node.js":}if(!this.isMuteLog){let t=["","==============üì£Á≥ªÁªüÈÄöÁü•üì£=============="];t.push(e),s&&t.push(s),a&&t.push(a),console.log(t.join("\n")),this.logs=this.logs.concat(t)}}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.join(this.logSeparator))}logErr(t,e){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":case"Quantumult X":default:this.log("",`‚ùóÔ∏è${this.name}, ÈîôËØØ!`,t);break;case"Node.js":this.log("",`‚ùóÔ∏è${this.name}, ÈîôËØØ!`,t.stack)}}wait(t){return new Promise(e=>setTimeout(e,t))}done(t={}){const e=(new Date).getTime(),s=(e-this.startTime)/1e3;switch(this.log("",`üîî${this.name}, ÁªìÊùü! üïõ ${s} Áßí`),this.log(),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":case"Quantumult X":default:$done(t);break;case"Node.js":process.exit(1)}}}(t,e)}Âéª
